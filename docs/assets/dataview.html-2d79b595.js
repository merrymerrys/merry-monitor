import{_ as t}from"./plugin-vue_export-helper-c27b6911.js";import{r as p,o as e,c as o,e as n,b as a,a as i,d as c}from"./app-0b038bf1.js";const l="/merry-monitor/assets/chart-99d2421d.png",u="/merry-monitor/assets/chart2-7a4b7342.png",r="/merry-monitor/assets/peak-c19d4a70.png",d={},k={class:"hint-container info"},h=n("p",{class:"hint-container-title"},"图表展示",-1),m={href:"https://www.qcustomplot.com/",target:"_blank",rel:"noopener noreferrer"},v=n("p",null,"图表功能囊括了项目中常见的几类图表。使用频率最高的位移、加速度图；使用频率较低的1/3倍频、轴心轨迹、转速图功能。",-1),b=n("p",null,"同时提供了特征值聚合后的数据列表。",-1),f=c('<h2 id="页面标注" tabindex="-1"><a class="header-anchor" href="#页面标注" aria-hidden="true">#</a> 页面标注</h2><p>图表功能提供了常用的辅助控件，基本涵盖了大多数的应用场景与测试任务。</p><div class="hint-container info"><p class="hint-container-title">V2.0版本的几点变化：</p><ol><li>删除了缩放的横向/纵向选择按钮，不再对缩放范围进行限制。</li><li>增加了加速度分离成单独窗口的功能。</li><li>取消了图谱的打印机功能。</li><li>时域/频域切换，由下拉框换成了滑动开关；图谱切换更加平滑。</li><li>增加了双击图谱缩放复位功能。</li></ol></div><figure><img src="'+l+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><div class="hint-container info"><p class="hint-container-title">V3.0版本的几点变化：</p><ol><li>增加了寻峰功能。</li><li>新增了部分状态与鼠标位置的数据显示。</li><li>十字游标替换为滑块游标。</li><li>通道切换后，立即从历史数据中刷新图表内容。</li></ol></div><figure><img src="'+u+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="通道选择" tabindex="-1"><a class="header-anchor" href="#通道选择" aria-hidden="true">#</a> 通道选择</h2><p>一般来说，加速度通道的起始位置相比位移通道要更靠后。在查看加速度数据图谱时，应及时调整通道选择到 <strong>你感兴趣的</strong> 通道上。</p><p>如果你要使用分离窗口功能，也应该先切换到你希望单独分离出去的通道。<br><strong>请注意，分离出去的窗口，不可以重新选择通道。</strong></p><h2 id="数据游标" tabindex="-1"><a class="header-anchor" href="#数据游标" aria-hidden="true">#</a> 数据游标</h2><p>默认情况下，数据游标不可见。用户可通过点击游标使能，打开或关闭游标的显示。游标移动时，其坐标值实时更新在图表页右上角。</p><h2 id="图谱缩放" tabindex="-1"><a class="header-anchor" href="#图谱缩放" aria-hidden="true">#</a> 图谱缩放</h2><p>图表缩放同时支持滚轮缩放与拖动缩放，X轴区域为横向缩放，Y轴区域纵向缩放，中间区域为双向缩放。缩放过程中，可以通过双击图谱，复位到最初的坐标范围。</p><p>每次图表刷新网络数据时，都会重新计算纵向坐标轴的范围。如果你需要保持纵向缩放的范围，请提前关闭刷新使能。<br> 后续视情况而定，可能会增加Y轴自适应功能的控制开关。</p><h2 id="屏幕截图" tabindex="-1"><a class="header-anchor" href="#屏幕截图" aria-hidden="true">#</a> 屏幕截图</h2><p>应用程序内置了截图功能。测试过程中，常常需要保存图像与原始数据，是一个高频应用场景。</p><p>因此，应用程序同时提供了保存图像截图与保存图像数据文本两种方式的交互。当需要查看当前图像的文本数据时，则将保存类型切换到数据即可。</p><p><strong>此外，在侧边栏左下角额外提供了一个全局的截图按钮。该截图按钮支持 <code>Ctrl+S</code> 快捷键激活。</strong></p><h2 id="幅频最大值" tabindex="-1"><a class="header-anchor" href="#幅频最大值" aria-hidden="true">#</a> 幅频最大值</h2><p>幅频最大值，由应用程序读取当前X轴的左右范围。在X轴的左右范围中，从原始数据中计算获取。</p><p>例如：当X轴的范围缩放至2500-6000的范围时，则在图谱数据刷新后，应用程序将从2500-6000的数据范围中寻找最大值。<br> 范围之外的数据则不参与计算。</p><p>状态栏中的幅频最大值表现的是当前加速度图像中，X轴范围内的最大值。<br> 这在某些需要查看一小段数据范围内的最大值时，是非常实用的。当然，你也可以暂停刷新数据，通过滑动游标观察右上角的游标数据的方式实现相同的目的。</p><p>注：幅频最值表现的是频域图谱的信息。</p><figure><img src="'+r+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="寻峰算法" tabindex="-1"><a class="header-anchor" href="#寻峰算法" aria-hidden="true">#</a> 寻峰算法</h2><p>寻峰算法，峰值是指一个序列中的一个元素，大于等于其相邻区域内元素的值。</p><p>从定义上看，这就是一个固定长度的窗口，从窗口中寻找最大值的过程(RMQ问题)。因此，通过滑动窗口加上单调队列维护区间最大值可以实现。</p><p>寻峰过程中，要求保留前20个最大值。也是一个典型的TOP K问题，维护一个小顶堆即可。</p><p>这里，我写了一段python代码，作为寻峰算法的一个简单实现。</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">AMPD</span><span class="token punctuation">(</span>data<span class="token punctuation">:</span> <span class="token builtin">list</span><span class="token punctuation">,</span> size<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> window_length<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">list</span><span class="token punctuation">:</span>
    q <span class="token operator">=</span> deque<span class="token punctuation">(</span><span class="token punctuation">)</span>
    ans <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    mid <span class="token operator">=</span> window_length <span class="token operator">//</span> <span class="token number">2</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        j <span class="token operator">=</span> i <span class="token operator">-</span> mid
        <span class="token keyword">while</span> q <span class="token keyword">and</span> q<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> j<span class="token punctuation">:</span>
            q<span class="token punctuation">.</span>popleft<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">while</span> q <span class="token keyword">and</span> data<span class="token punctuation">[</span>q<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span>
            q<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>
        q<span class="token punctuation">.</span>append<span class="token punctuation">(</span>i<span class="token punctuation">)</span>
        <span class="token keyword">if</span> q<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> j<span class="token punctuation">:</span>
            <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>ans<span class="token punctuation">)</span> <span class="token operator">&lt;</span> size<span class="token punctuation">:</span>
                heapq<span class="token punctuation">.</span>heappush<span class="token punctuation">(</span>ans<span class="token punctuation">,</span> <span class="token punctuation">(</span>data<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                heapq<span class="token punctuation">.</span>heapopush<span class="token punctuation">(</span>ans<span class="token punctuation">,</span> <span class="token punctuation">(</span>data<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> ans
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,30);function g(_,w){const s=p("ExternalLinkIcon");return e(),o("div",null,[n("div",k,[h,n("p",null,[a("图表功能的构建，基于"),n("a",m,[a("QCustomPlot"),i(s)]),a("开源项目的支持。")]),v,b]),f])}const q=t(d,[["render",g],["__file","dataview.html.vue"]]);export{q as default};
